# Learning Express.js with TypeScript and PostgreSQL

This project is a RESTful API built with Express.js 5, TypeScript, and PostgreSQL.

## Features

- Express.js 5 with TypeScript
- PostgreSQL database integration
- RESTful API for products and users
- Docker Compose setup for PostgreSQL
- Seeding script for development data

## Prerequisites

- Node.js 18+ and pnpm
- Docker and Docker Compose (for PostgreSQL)
- PostgreSQL client (optional, for direct database access)

## Setup

1. Clone the repository
2. Install dependencies:

```bash
pnpm install
```

3. Configure environment variables:

Create or update `.env` file with the following values:

```
PGHOST=localhost
PGUSER=postgres
PGDATABASE=user-management-db
PGPASSWORD=your_password
PGPORT=5432
```

4. Start the PostgreSQL database:

```bash
docker-compose up -d
```

5. Start the development server:

```bash
pnpm dev
```

The server will be available at http://localhost:8000.

## Available Scripts

- `pnpm dev` - Start the development server with hot reloading
- `pnpm build` - Build the production version
- `pnpm start` - Run the production build
- `pnpm seed` - Seed the database with sample data

## API Endpoints

### Users

- `GET /api/users` - Get all users
- `GET /api/users/:id` - Get a user by ID
- `POST /api/users` - Create a new user
- `PUT /api/users/:id` - Update a user
- `DELETE /api/users/:id` - Delete a user

### Products

- `GET /api/products` - Get all products
- `GET /api/products/:id` - Get a product by ID
- `POST /api/products` - Create a new product
- `PUT /api/products/:id` - Update a product
- `DELETE /api/products/:id` - Delete a product

## Testing the API

You can test the API endpoints using the included HTTP requests file (`app.http`). If you're using VS Code, install the "REST Client" extension to execute these requests directly from the editor.

## Initial Project Setup (Reference)

Follow these steps to create this project from scratch:

### 1. Initialize the project

Create a new directory and initialize a new Node.js project:

```bash
mkdir express-ts-api
cd express-ts-api
pnpm init
```

This will create a basic `package.json` file.

### 2. Install TypeScript and type definitions

```bash
pnpm add -D typescript @types/node @types/express
pnpm add express
```

### 3. Initialize TypeScript configuration

```bash
pnpm tsc --init
```

Update the `tsconfig.json` file with appropriate settings:

```json
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "esModuleInterop": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules"]
}
```

### 4. Set up project structure

Create the basic directory structure:

```bash
mkdir -p src/controllers src/models src/routes src/middleware src/utils
touch src/index.ts
```

### 5. Install PostgreSQL related dependencies

```bash
pnpm add pg
pnpm add -D @types/pg
```

### 6. Add development dependencies and scripts

```bash
pnpm add -D ts-node nodemon
```

Update your `package.json` scripts:

```json
{
  "scripts": {
    "dev": "nodemon --exec ts-node src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "seed": "ts-node src/utils/seed.ts"
  }
}
```

### 7. Create Docker Compose file for PostgreSQL

Create a `docker-compose.yml` file:

```yaml
version: '3.8'
services:
  postgres:
    image: postgres:15
    container_name: express-ts-postgres
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: your_password
      POSTGRES_DB: user-management-db
    ports:
      - "5432:5432"
    volumes:
      - postgres-data:/var/lib/postgresql/data

volumes:
  postgres-data:
```

### 8. Create environment file

Create `.env` file:

```
PGHOST=localhost
PGUSER=postgres
PGDATABASE=user-management-db
PGPASSWORD=your_password
PGPORT=5432
```

### 9. Set up .gitignore

Create a `.gitignore` file with the following content:

```bash
# Dependency directories
node_modules/
jspm_packages/

# TypeScript cache
*.tsbuildinfo

# Optional npm cache directory
.npm

# Optional eslint cache
.eslintcache

# Optional stylelint cache
.stylelintcache

# Output of 'npm pack'
*.tgz

# dotenv environment variable files
.env
.env.development.local
.env.test.local
.env.production.local
.env.local

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
lerna-debug.log*
.pnpm-debug.log*

# Diagnostic reports (https://nodejs.org/api/report.html)
report.[0-9]*.[0-9]*.[0-9]*.[0-9]*.json

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Directory for instrumented libs generated by jscoverage/JSCover
lib-cov

# Coverage directory used by tools like istanbul
coverage
*.lcov

# nyc test coverage
.nyc_output

# Build outputs
dist/
build/
```

### 10. Create a basic Express server

Create a minimal Express server in `src/index.ts`:

```typescript
import express from 'express';
import dotenv from 'dotenv';

// Load environment variables
dotenv.config();

// Create Express app
const app = express();
const port = process.env.PORT || 8000;

// Middleware
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Root route
app.get('/', (req, res) => {
  res.json({ message: 'Express TypeScript API is running' });
});

// Start server
app.listen(port, () => {
  console.log(`Server is running on http://localhost:${port}`);
});
```

### 11. Install additional dependencies

```bash
pnpm add dotenv
pnpm add cors
pnpm add -D @types/cors
```

Now you're ready to start building your RESTful API with Express.js, TypeScript, and PostgreSQL!

## Recent Updates

The project documentation has been enhanced with the following improvements:
- Added detailed step-by-step instructions for setting up the project from scratch
- Included complete configuration examples for TypeScript, package.json, and Docker
- Added clear instructions for environment setup and database configuration
- Provided comprehensive .gitignore settings for Node.js and TypeScript projects
- Added basic Express server implementation with TypeScript
